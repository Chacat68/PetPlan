# 宠物系统使用指南

## 🐾 宠物系统概述

宠物系统是Pet Plan游戏的核心功能，允许玩家收集、培养、编队和使用各种宠物进行战斗。

## 📋 功能清单

### ✅ 已实现功能

1. **宠物收集**
   - 8种不同类型的宠物（火、冰、雷、土、风、光、暗、凤凰）
   - 5个稀有度等级（普通、优秀、稀有、史诗、传说）
   - 基于等级和资源的解锁系统

2. **宠物属性**
   - 基础属性：攻击力、生命值、防御力、攻击速度
   - 成长属性：等级、经验值
   - 养成属性：好感度、饱腹度、精力值

3. **宠物技能**
   - 每个宠物拥有独特技能
   - 技能冷却时间系统
   - 多种技能效果（伤害、控制、增益）

4. **宠物编队**
   - 前排3个槽位 + 后排3个槽位
   - 拖放式管理
   - 队伍属性加成显示

5. **宠物战斗**
   - 自动攻击系统
   - 技能自动释放
   - 独立的攻击判定和伤害计算
   - 宠物子弹系统
   - 技能特效展示

6. **宠物养成**
   - 喂食系统（恢复饱腹度）
   - 训练系统（获得经验值）
   - 好感度系统（影响战斗属性）
   - 自动状态衰减

7. **存档系统**
   - 完整的宠物数据保存
   - 槽位和装备状态保存
   - 养成进度保存

## 🎮 使用方法

### 打开宠物管理界面

1. 点击屏幕左下角的 **🐾 宠物** 按钮
2. 弹出宠物管理界面

### 宠物图鉴 - 解锁新宠物

1. 在宠物管理界面点击 **图鉴** 标签
2. 查看所有可用宠物
3. 满足条件后点击 **解锁** 按钮
   - 需要达到指定等级
   - 需要支付金币和红宝石

**宠物列表：**

| 宠物 | 稀有度 | 解锁等级 | 成本 | 特色 |
|------|--------|----------|------|------|
| 火焰犬🔥🐕 | 普通⭐ | 1级 | 500💰 | 火球术，范围伤害 |
| 冰霜猫❄️🐱 | 普通⭐ | 1级 | 500💰 | 冰霜新星，减速敌人 |
| 雷电鸟⚡🦅 | 优秀⭐⭐ | 5级 | 2000💰+50🔴 | 连锁闪电，多目标 |
| 大地熊🌍🐻 | 优秀⭐⭐ | 8级 | 3000💰+100🔴 | 地震，眩晕敌人 |
| 风暴龙🌪️🐉 | 稀有⭐⭐⭐ | 15级 | 10000💰+300🔴 | 龙卷风，持续伤害 |
| 光明独角兽✨🦄 | 史诗⭐⭐⭐⭐ | 20级 | 20000💰+500🔴 | 圣光祝福，治疗增益 |
| 暗影狼🌑🐺 | 史诗⭐⭐⭐⭐ | 25级 | 25000💰+600🔴 | 暗影突袭，高暴击 |
| 凤凰🔥🦅 | 传说⭐⭐⭐⭐⭐ | 30级 | 50000💰+1000🔴 | 浴火重生，复活能力 |

### 宠物背包 - 管理已有宠物

1. 在宠物管理界面点击 **背包** 标签
2. 查看所有已拥有的宠物
3. 点击宠物卡片查看详细信息
4. 使用操作按钮：
   - **详情**：查看完整属性和技能
   - **喂食**：消耗金币恢复饱腹度和精力
   - **训练**：消耗金币和精力获得经验

### 宠物编队 - 组建战斗队伍

1. 在宠物管理界面点击 **编队** 标签
2. 查看前排和后排槽位
3. 点击空槽位 **+** 选择宠物上阵
4. 点击已装备宠物可以查看详情或卸下
5. 查看队伍总属性加成

**战斗定位：**
- **前排**：坦克型宠物（大地熊等），承受伤害
- **后排**：输出型宠物（雷电鸟、暗影狼等），远程攻击

### 宠物养成

#### 喂食
- **作用**：恢复饱腹度+30，精力+20，好感度+2
- **成本**：50金币 × 宠物等级
- **建议**：饱腹度低于30时会影响战斗效率

#### 训练
- **作用**：获得经验值，好感度+1
- **成本**：100金币 × 宠物等级，消耗20精力
- **经验获得**：20 + 等级×5
- **建议**：精力充足时定期训练

#### 好感度影响
- 好感度范围：0-100
- 提供战斗属性加成（最高20%）
- 通过喂食和训练提升

## 🎯 战斗机制

### 自动攻击
- 宠物会自动选择最近的怪物攻击
- 攻击间隔基于宠物的攻击速度
- 发射特色子弹（不同类型不同颜色）

### 技能释放
- 技能按冷却时间自动释放
- 不同技能有不同效果：
  - **伤害技能**：对敌人造成高额伤害
  - **控制技能**：减速、眩晕敌人
  - **增益技能**：治疗、提升属性

### 伤害计算
- 基础伤害 = 宠物攻击力
- 技能伤害 = 技能固定伤害
- 好感度加成影响最终伤害
- 饱腹度低会降低战斗效率

### 视觉表现
- 宠物显示在Canvas左侧
- 前排位置稍靠右，后排靠左
- 垂直排列，易于区分
- 生命值条实时显示

## 💡 使用技巧

### 新手推荐组合
```
前排：
- 大地熊（坦克，高生命高防御）

后排：
- 火焰犬（稳定输出）
- 冰霜猫（控制减速）
- 雷电鸟（群体伤害）
```

### 进阶推荐组合
```
前排：
- 大地熊（主坦）
- 风暴龙（副坦+输出）

后排：
- 暗影狼（高爆发）
- 光明独角兽（治疗+增益）
- 凤凰（复活保险）
```

### 资源优化策略

1. **优先解锁顺序**
   - 先解锁1级宠物（便宜）
   - 等级提升后解锁高级宠物
   - 稀有度高的宠物性价比更高

2. **养成策略**
   - 优先培养主力宠物
   - 保持好感度在80以上
   - 定期喂食避免饱腹度过低
   - 精力充足时多训练升级

3. **编队策略**
   - 前排至少1只坦克
   - 后排搭配输出和辅助
   - 根据关卡难度调整组合
   - 属性克制（待实现）

## 🔧 系统接口（开发者）

### 解锁宠物
```javascript
const result = petSystem.unlockPet(petId);
// 返回: { success: boolean, message: string, pet: Object }
```

### 装备宠物
```javascript
const result = petSystem.equipPet(petInstanceId, 'front', 0);
// position: 'front' | 'back'
// slotIndex: 0-2
```

### 喂食宠物
```javascript
const result = petSystem.feedPet(petInstanceId);
```

### 训练宠物
```javascript
const result = petSystem.trainPet(petInstanceId);
```

### 获取队伍加成
```javascript
const bonus = petSystem.getTotalPowerBonus();
// 返回: { attack: number, defense: number }
```

## 📊 数据结构

### 宠物实例
```javascript
{
    instanceId: number,        // 唯一实例ID
    templateId: number,        // 模板ID
    name: string,              // 名称
    level: number,             // 等级
    exp: number,               // 当前经验
    expToNext: number,         // 升级所需经验
    attack: number,            // 攻击力
    hp: number,                // 当前生命
    maxHp: number,             // 最大生命
    defense: number,           // 防御力
    friendship: number,        // 好感度 0-100
    hunger: number,            // 饱腹度 0-100
    energy: number,            // 精力 0-100
    position: {                // 装备位置
        type: 'front'|'back',
        index: 0-2
    } | null
}
```

## 🐛 已知问题

暂无

## 🚀 未来计划

1. **宠物进化系统**
   - 达到特定等级可进化
   - 进化后外观和技能改变
   - 属性大幅提升

2. **宠物融合**
   - 两只相同宠物可融合
   - 提升星级
   - 获得额外技能

3. **宠物装备**
   - 为宠物装备道具
   - 提供额外属性加成
   - 改变技能效果

4. **宠物羁绊**
   - 特定宠物组合产生羁绊效果
   - 提供额外加成
   - 解锁特殊技能

5. **宠物图鉴成就**
   - 收集所有宠物获得奖励
   - 稀有度收集奖励
   - 类型收集奖励

## 📝 更新日志

### v1.0.0 (2025-01-20)
- ✅ 实现宠物收集系统
- ✅ 实现宠物属性和成长
- ✅ 实现宠物技能系统
- ✅ 实现宠物编队管理
- ✅ 实现宠物战斗逻辑
- ✅ 实现宠物养成系统
- ✅ 集成存档系统
- ✅ 完整的UI界面
- ✅ 8种初始宠物

---

**享受与宠物一起战斗的乐趣！** 🎮✨
