# 领地系统设计文档

## 1. 概述

领地系统是玩家在游戏中的家园，核心功能是为玩家提供稳定的资源产出，并通过建造和升级各种建筑来强化其核心战斗单位（如宠物或角色）的属性。该系统不包含领地内的战斗，而是专注于策略性的资源管理和长期的角色成长支持。

## 2. 核心功能

### 2.1. 领地获取

- **获取方式**: 玩家达到特定等级（例如 10 级）后，通过完成一个引导任务来解锁领地系统。
- **初始领地**: 解锁后，玩家将获得一块初始大小的领地，其中包含一个主基地。

### 2.2. 领地建设

- **建筑类型**:
    - **主基地**: 领地的核心，决定了领地的等级上限和可建造的建筑数量。升级主基地需要消耗大量资源。
    - **资源建筑**:
        - **金矿**: 持续产出金币。
        - **水晶矿**: 持续产出水晶。
    - **辅助建筑**:
        - **仓库**: 提升金币和水晶的存储上限。
        - **市场**: 与其他玩家进行资源交易。
    - **属性强化建筑**:
        - **训练场**: 提升核心战斗单位的攻击力。
        - **神庙**: 提升核心战斗单位的防御力。
        - **图书馆**: 提升核心战斗单位的生命值上限。
    - **装饰建筑**:
        - **花园**: 提升领地的美观度，可能会有微小的增益效果。
        - **雕像**: 用于展示玩家的成就。
    - **功能建筑**:
        - **研究所**: 解锁新的科技和建筑。
        - **宠物小屋**: 允许玩家饲养宠物，宠物可以协助战斗或提供加成。
- **建造与升级**:
    - 玩家可以消耗金币和水晶来建造和升级建筑。
    - 建筑的等级不能超过主基地的等级。

### 2.3. 资源管理

- **资源产出**: 资源建筑会随着时间自动产出资源，玩家需要手动收集。
- **资源存储**: 领地内有独立的资源仓库，用于存储领地产出的金币和水晶。

### 2.5. 领地扩展

- **扩展方式**: 玩家可以消耗特定道具（例如“领地契约”）来扩展领地的边界，获得更多可建造空间。
- **扩展限制**: 领地的扩展次数受主基地等级的限制。

## 3. 数据结构

### 3.1. 领地数据

```javascript
const territoryData = {
    level: 1,
    size: { width: 20, height: 20 }, // 领地大小，以格子为单位
    buildings: [
        {
            id: "main_base_1",
            type: "main_base",
            level: 1,
            position: { x: 10, y: 10 }
        },
        // 其他建筑...
    ],
    resources: {
        gold: 1000,
        crystal: 100
    }
};
```

### 3.2. 建筑数据

```javascript
const buildingData = {
    "main_base": {
        name: "主基地",
        levels: [
            { level: 1, cost: { gold: 0, crystal: 0 }, hp: 1000, buildLimit: 5 },
            { level: 2, cost: { gold: 10000, crystal: 500 }, hp: 1500, buildLimit: 8 },
            // ...
        ]
    },
    "training_ground": {
        name: "训练场",
        levels: [
            { level: 1, cost: { gold: 1000, crystal: 100 }, attackBonus: 5 },
            { level: 2, cost: { gold: 5000, crystal: 500 }, attackBonus: 10 },
            // ...
        ]
    },
    "temple": {
        name: "神庙",
        levels: [
            { level: 1, cost: { gold: 1000, crystal: 100 }, defenseBonus: 5 },
            { level: 2, cost: { gold: 5000, crystal: 500 }, defenseBonus: 10 },
            // ...
        ]
    },
    // 其他建筑...
};
```

## 4. 与现有系统的集成

- **玩家系统**：领地等级和玩家等级相关联，高等级玩家可以解锁更高级的建筑和领地扩张选项。领地为玩家提供了一个展示其成就和个性的平台。
- **战斗系统**：属性强化建筑（如训练场、神庙）提供的属性加成将直接应用于玩家的核心战斗单位，从而影响战斗结果。领地系统本身不参与战斗。
- **资源系统**：领地是资源的主要来源之一。领地中产出的资源将直接进入玩家的资源背包，用于游戏中的各种消耗。
- **UI系统**：需要为领地系统设计独立的UI界面，包括领地主界面、建筑列表、升级界面等。UI应清晰地展示资源产出、建筑状态和属性加成等信息。

## 5. 未来扩展

- **PVP 对战**: 允许玩家之间互相攻击领地，掠夺资源。
- **联盟系统**: 玩家可以组成联盟，共同建设和防御领地。
- **更多建筑和单位**: 持续推出新的建筑和宠物，丰富领地的玩法。