# 🎮 PetPlan 玩家指南

欢迎来到 PetPlan！本指南为新玩家提供完整的游戏玩法和系统说明。

---

## 📋 目录

1. [宠物系统指南](#宠物系统)
2. [存档系统指南](#存档系统)
3. [领地建设指南](#领地系统)
4. [常见问题](#常见问题)

---

## 🐾 宠物系统

### 概述

宠物系统是游戏的核心玩法，允许玩家收集、培养、编队和使用各种宠物进行战斗。

### 宠物图鉴 - 解锁新宠物

1. 点击屏幕左下角的 **🐾 宠物** 按钮
2. 在弹出的菜单中点击 **图鉴** 标签
3. 查看所有可用宠物
4. 满足条件后点击 **解锁** 按钮
   - 需要达到指定等级
   - 需要支付金币和红宝石

#### 宠物列表

| 宠物 | 稀有度 | 解锁等级 | 成本 | 特色 |
|------|--------|----------|------|------|
| 🔥 火焰犬 | 普通⭐ | 1级 | 500💰 | 火球术，范围伤害 |
| ❄️ 冰霜猫 | 普通⭐ | 1级 | 500💰 | 冰霜新星，减速敌人 |
| ⚡ 雷电鸟 | 优秀⭐⭐ | 5级 | 2000💰+50🔴 | 连锁闪电，多目标 |
| 🌍 大地熊 | 优秀⭐⭐ | 8级 | 3000💰+100🔴 | 地震，眩晕敌人 |
| 🌪️ 风暴龙 | 稀有⭐⭐⭐ | 15级 | 10000💰+300🔴 | 龙卷风，持续伤害 |
| ✨ 光明独角兽 | 史诗⭐⭐⭐⭐ | 20级 | 20000💰+500🔴 | 圣光祝福，治疗增益 |
| 🌑 暗影狼 | 史诗⭐⭐⭐⭐ | 25级 | 25000💰+600🔴 | 暗影突袭，高暴击 |
| 凤凰 | 传说⭐⭐⭐⭐⭐ | 30级 | 50000💰+1000🔴 | 浴火重生，复活能力 |

### 宠物背包 - 管理已有宠物

1. 点击 **🐾 宠物** → **背包** 标签
2. 查看所有已拥有的宠物
3. 点击宠物卡片查看详细信息
4. 使用操作按钮：
   - **详情**：查看完整属性和技能
   - **喂食**：恢复饱腹度和精力（成本：50金币 × 宠物等级）
   - **训练**：获得经验值（成本：100金币 × 宠物等级 + 20精力）

#### 养成属性说明

| 属性 | 说明 | 恢复方法 |
|------|------|---------|
| 好感度 | 范围 0-100，影响战斗属性加成（最高20%）| 喂食、训练 |
| 饱腹度 | 范围 0-100，低于30会影响战斗效率 | 喂食 |
| 精力值 | 范围 0-100，用于训练消耗 | 自动恢复 |

### 宠物编队 - 组建战斗队伍

1. 点击 **🐾 宠物** → **编队** 标签
2. 查看前排和后排槽位
3. 点击空槽位 **+** 选择宠物上阵
4. 点击已装备宠物可以查看详情或卸下
5. 查看队伍总属性加成

#### 战斗定位建议

- **前排**：坦克型宠物（如大地熊），承受伤害
- **后排**：输出型宠物（如雷电鸟、暗影狼），远程攻击和辅助

#### 推荐编队组合

**新手推荐组合：**
```
前排：大地熊（坦克，高生命高防御）

后排：火焰犬（稳定输出）
     冰霜猫（控制减速）
     雷电鸟（群体伤害）
```

**进阶推荐组合：**
```
前排：大地熊（主坦）
     风暴龙（副坦+输出）

后排：暗影狼（高爆发）
     光明独角兽（治疗+增益）
     凤凰（复活保险）
```

### 战斗机制

- **自动攻击**：宠物会自动选择最近的怪物攻击
- **技能释放**：技能按冷却时间自动释放
- **视觉表现**：宠物显示在Canvas左侧，前排靠右，后排靠左

---

## 💾 存档系统

### 快速开始

存档系统已完全集成到游戏中，点击屏幕左下角的 **💾 存档** 按钮即可打开存档管理界面。

### 保存游戏

| 方法 | 操作 | 说明 |
|------|------|------|
| 手动保存 | 在存档界面选择槽位，点击**保存** | 保存到指定槽位 |
| 快速保存 | 按下 **F5** | 快速保存到槽位 1 |
| 自动保存 | 无需操作 | 游戏每 30 秒自动保存到槽位 1 |

### 加载游戏

| 方法 | 操作 | 说明 |
|------|------|------|
| 手动加载 | 在存档界面选择槽位，点击**加载** | 从指定槽位恢复进度 |
| 快速加载 | 按下 **F9** | 快速加载槽位 1 |

⚠️ **警告**：加载存档会覆盖当前游戏进度，请谨慎操作。

### 存档管理

#### 删除存档
在存档管理界面中，点击对应槽位的 **删除** 按钮，确认后即可删除。

#### 导出存档
1. 点击对应槽位的 **导出** 按钮
2. 系统自动下载 JSON 格式的存档文件
3. **建议**：定期导出存档以备份游戏进度

#### 导入存档
1. 在存档管理界面的 **导入存档** 区域，点击 **选择文件**
2. 选择之前导出的 JSON 存档文件
3. 在下拉框中选择目标槽位
4. 点击 **导入** 按钮完成

### 存档内容

每个存档包含以下数据：
- ✅ 玩家等级、生命值、攻击力等属性
- ✅ 所有属性的升级成本
- ✅ 金币、红宝石、水晶等资源
- ✅ 宠物信息和编队情况
- ✅ 领地等级和建筑信息
- ✅ 战斗系统配置

### 注意事项

1. **浏览器兼容性**：使用浏览器的 LocalStorage，确保浏览器支持
2. **数据安全**：
   - 存档保存在浏览器本地
   - 清除浏览器数据会删除存档
   - **建议**：定期导出存档备份
3. **存储限制**：LocalStorage 通常限制在 5-10MB
4. **跨设备使用**：导出的存档文件可以在其他电脑上导入

---

## 🏰 领地系统

### 概述

领地系统允许玩家建造和管理各种建筑来提升角色属性和获得资源。

### 基本概念

#### 领地布局
- **初始地块**：2×3 网格布局，共 6 个地块
- **扩张容量**：可通过扩张增加至 12 个地块
- **地块状态**：
  - 🔒 **锁定**：未解锁（需达到特定等级）
  - 🆓 **空闲**：可建造建筑
  - 🏗️ **建造中**：正在建造的建筑
  - 🏢 **已建造**：完整的建筑

#### 地块解锁规则

**初始地块**（6 个）：

| 地块 | 解锁等级 | 说明 |
|------|----------|------|
| 地块 0 | 0 级 | ✅ 默认开放 |
| 地块 1 | 5 级 | 需要达到 5 级 |
| 地块 2 | 10 级 | 需要达到 10 级 |
| 地块 3 | 15 级 | 需要达到 15 级 |
| 地块 4 | 20 级 | 需要达到 20 级 |
| 地块 5 | 25 级 | 需要达到 25 级 |

### 领地扩张

#### 扩张概述
- **初始地块**：6 个
- **最大地块**：12 个（通过 3 次扩张）
- **扩张成本**逐次增加

#### 扩张成本

| 扩张次数 | 金币消耗 | 水晶消耗 | 主基地等级要求 |
|----------|----------|----------|----------------|
| 第 1 次 | 10,000 | 500 | 1 级 |
| 第 2 次 | 25,000 | 1,500 | 1 级 |
| 第 3 次 | 50,000 | 3,000 | 2 级 |

### 建筑系统

#### 建筑类型

##### 🏰 主基地 (Main Base)
- **功能**：控制建筑数量上限
- **升级成本**：
  - 等级 1 → 2：10,000 金币 + 500 水晶
  - 属性：生命值升级，建筑上限增加

##### 🏋️ 训练场 (Training Ground)
- **功能**：提供攻击力加成
- **升级成本**：
  - 等级 1 → 2：5,000 金币 + 500 水晶（+5 攻击）
  - 等级 2 → 3：15,000 金币 + 1,500 水晶（+10 攻击）

##### 🏛️ 神庙 (Temple)
- **功能**：提供防御力加成
- **升级成本**：
  - 等级 1 → 2：5,000 金币 + 500 水晶（+5 防御）
  - 等级 2 → 3：15,000 金币 + 1,500 水晶（+10 防御）

##### ⚔️ 兵营 (Barracks)
- **功能**：提供攻防综合加成
- **升级成本**：
  - 等级 1 → 2：8,000 金币 + 800 水晶（+3 攻防）
  - 等级 2 → 3：20,000 金币 + 2,000 水晶（+6 攻防）

##### 🔨 工坊 (Workshop)
- **功能**：产出金币
- **初期产出**：50 金币/次
- **升级产出**：最高 200 金币/次

##### 💎 水晶矿 (Crystal Mine)
- **功能**：产出水晶
- **初期产出**：10 水晶/次
- **升级产出**：最高 50 水晶/次

##### 📚 图书馆 (Library)
- **功能**：提供经验加成
- **增益效果**：加快等级提升

### 建造策略

#### 优先建造顺序
1. **主基地**（优先升级，增加建筑上限）
2. **训练场 + 神庙**（提升战斗属性）
3. **工坊 + 水晶矿**（增加资源产出）
4. **兵营**（平衡属性加成）
5. **图书馆**（辅助升级）

#### 资源优化建议
- **初期**：优先建造属性建筑，提升战斗力
- **中期**：平衡资源产出建筑，加快金币和水晶获取
- **后期**：升级关键建筑，优化属性加成

---

## ❓ 常见问题

### 宠物系统

**Q：如何快速升级宠物？**  
A：定期进行训练（消耗金币和精力），保持好感度在 80 以上以获得属性加成。

**Q：饱腹度为 0 会发生什么？**  
A：饱腹度低于 30 会影响战斗效率。建议定期喂食保持在 60 以上。

**Q：如何更换编队宠物？**  
A：在编队界面点击已装备的宠物卡片，选择"卸下"，然后点击空槽位装备新宠物。

### 存档系统

**Q：如何备份游戏进度？**  
A：使用导出功能将存档保存为 JSON 文件，妥善保管。

**Q：可以在不同电脑上使用同一个存档吗？**  
A：可以！导出存档文件后，在其他电脑上通过导入功能恢复。

**Q：自动保存会覆盖我的手动存档吗？**  
A：自动保存只影响槽位 1。建议重要进度保存到槽位 2-5。

**Q：存档丢失了怎么办？**  
A：如果有导出备份，可通过导入功能恢复。否则只能重新开始游戏。

### 领地系统

**Q：建筑数量有限制吗？**  
A：是的，受主基地等级限制。升级主基地可增加建筑上限。

**Q：如何获得水晶？**  
A：通过建造水晶矿获得，或购买宠物、升级建筑时支付。

**Q：地块什么时候解锁？**  
A：根据玩家等级自动解锁。达到要求等级后，锁定的地块会自动显示为可用。

**Q：可以重新设计领地布局吗？**  
A：可以拖动建筑重新排列（取决于游戏实现）。

---

## 📞 需要帮助？

- 查看更详细的技术文档：[doc/](../../doc/)
- 查看快速参考：[js/modules/QUICK_REFERENCE.md](../../js/modules/QUICK_REFERENCE.md)
- 提交 Bug 或建议：通过项目 Issue 或 PR

---

**版本**：v1.0.1  
**最后更新**：2025 年 12 月 14 日
